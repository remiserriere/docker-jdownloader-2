#!/bin/sh

# Wrapper script for JDownloader to reconnect OpenVPN
# This script can be called by the app user and uses sudo to control OpenVPN
# Usage: jd-openvpn-reconnect

set -u # Treat unset variables as an error

log() {
    echo "[jd-openvpn-reconnect] $@"
}

# Call openvpn-control restart with sudo
# The openvpn-control script will perform all necessary validation
log "Reconnecting OpenVPN..."
sudo /usr/local/bin/openvpn-control restart
result=$?

exit $result
